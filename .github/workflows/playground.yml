name: Playground

on: [pull_request]

jobs:
  preview:
    runs-on: ubuntu-20.04
    steps:
      - name: Playground
        run: |
          ISSUE_NUMBER=$(jq --raw-output .pull_request.number "${GITHUB_EVENT_PATH}")
          curl \
            -X POST \
            -H "Accept: application/vnd.github.v3+json" \
            -H 'Authorization: token ${{ secrets.GITHUB_TOKEN }}' \
            ${GITHUB_API_URL}/repos/${GITHUB_REPOSITORY}/issues/${ISSUE_NUMBER}/comments \
            -d "{\"body\":\"Hogehoge\"}" \
            -w '%{http_code}\n' -v --fail
